<?xml version="1.0" encoding="UTF-8"?>
<Configuration status="WARN">
    <!--Rotate log file. If file size > 10m or the current date is different with the log file time stamp, create archives.-->
    <!--    By default, it will create up to 7 archives on the same day.-->
    <!--    We can override the default 7 archives with this DefaultRolloverStrategy-->
    <Appenders>
        <Console name="LogToConsole" target="SYSTEM_OUT">
            <PatternLayout
                    pattern="%style{%d{ISO8601}}{bright,blue} %highlight{%-5level }[%style{%t}{bright,blue}] %style{%C{1.}}{bright,yellow}: %msg%n%throwable"/>
        </Console>

        <RollingFile name="LogToRollingFile" fileName="logs/app.log"
                     filePattern="logs/$${date:yyyy-MM}/app-%d{MM-dd-yyyy}-%i.log.gz">
            <PatternLayout>
                <Pattern>%d{HH:mm:ss.SSS} [%t] %-5level - %msg%n</Pattern>
            </PatternLayout>
            <Policies>
                <TimeBasedTriggeringPolicy/>
                <SizeBasedTriggeringPolicy size="1 MB"/>
            </Policies>
            <DefaultRolloverStrategy max="1"/>
        </RollingFile>
    </Appenders>

    <!--    Standard log levels built-in to Log4J
    OFF	0
    FATAL	100
    ERROR	200
    WARN	300
    INFO	400
    DEBUG	500
    TRACE	600
    ALL	Integer.MAX_VALUE
    -->

    <!--    мы хотим чтобы в пакете petproject всё логировалось в консоль и в файл с уровнем ERROR
    но я поставлю в данном случае INFO -->
    <Loggers>
        <!--         avoid duplicated logs with additivity=false-->
        <Logger name="com.petproject" level="info" additivity="false">
            <AppenderRef ref="LogToConsole"/>
            <AppenderRef ref="LogToRollingFile"/>
        </Logger>

        <Root level="info">
            <AppenderRef ref="LogToConsole"/>
            <AppenderRef ref="LogToRollingFile"/>
        </Root>
    </Loggers>

</Configuration>